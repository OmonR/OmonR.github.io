const _0x24c9=['location','tapToStartOverlay','lat','createElement','exception','return\x20/\x22\x20+\x20this\x20+\x20\x22/','info','‚ö†Ô∏è\x20–û—à–∏–±–∫–∞\x20—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\x20—Å\x20—Å–µ—Ä–≤–µ—Ä–æ–º','13ZKhoek','close','setProperty','getContext','table','getElementById','.spinner','464337qbHSAE','disabled','drawImage','action','7nrjdIW','photoGrid','input','Camera\x20error:','https://autopark-gthost.amvera.io/api/report','cameraTopControls','geolocation','chat_id','https://autopark-gthost.amvera.io/api/auth?car_id=','HapticFeedback','View','camera','width','play','sessionCanvas','link_color','className','show','session','key','–û—à–∏–±–∫–∞\x20–∑–∞–ø—Ä–æ—Å–∞:','videoWidth','hidden','odometerInput','‚ùå\x20–û—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–æ—Ç–ø—Ä–∞–≤–∫–µ','text_color','preventDefault','85381KkVZVo','longitude','msg_id','hint_color','dataset','‚ùå\x20–û—à–∏–±–∫–∞\x20–∑–∞–≥—Ä—É–∑–∫–∏\x20—Ñ–æ—Ç–æ\x20–æ–¥–æ–º–µ—Ç—Ä–∞:','applyConstraints','stop','active','1.0','height','length','backToCamera','image/jpeg','srcObject','16455mLKdKd','–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è\x20–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è\x20—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º\x20–∏–ª–∏\x20–ø—Ä–∏–∏–ª–æ–∂–µ–Ω–µ–º','‚ùå\x20–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç\x20—Ñ–æ—Ç–æ\x20–æ–¥–æ–º–µ—Ç—Ä–∞.','--tg-theme-link-color','getVideoTracks','zoom','Callback\x20response:','check','div','–û—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–∑–∞–ø—Ä–æ—Å–µ:\x20','reviewButtons','detail','stringify','22903nlaOFh','style','–û—à–∏–±–∫–∞\x20–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.','catch','sessionCaptureButton','log','.container','initData','search','userAgent','odometer','block','391878dDOWnZ','value','torch','expand','backButton','alt','json','remove','--tg-theme-button-color','–ù–µ\x20—É–¥–∞–ª–æ—Å—å\x20–ø–æ–ª—É—á–∏—Ç—å\x20–¥–æ—Å—Ç—É–ø\x20–∫\x20–∫–∞–º–µ—Ä–µ.\x20–†–∞–∑—Ä–µ—à–∏—Ç–µ\x20–¥–æ—Å—Ç—É–ø\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.','photo-slot-mini\x20','status','submitOdometerPhoto','latitude','add','üì∏\x20–§–æ—Ç–æ\x20—É—Å–ø–µ—à–Ω–æ\x20–∑–∞–≥—Ä—É–∂–µ–Ω–æ:','click','‚ùå\x20–ù–µ\x20—É–¥–∞–ª–æ—Å—å\x20–ø–æ–ª—É—á–∏—Ç—å\x20–¥–∞–Ω–Ω—ã–µ\x20Telegram.','innerHTML','button_text_color','map','removeLayer','photoStatus','marker','video','prototype','empty','constructor','application/json','--tg-theme-button-text-color','ready','none','POST','error-message','addTo','getCurrentPosition','bind','textContent','https://autopark-gthost.amvera.io/api/odometer/recognize','querySelector','‚õî\x20–£\x20–≤–∞—Å\x20—É–∂–µ\x20–µ—Å—Ç—å\x20–∞–∫—Ç–∏–≤–Ω–∞—è\x20—Å–µ—Å—Å–∏—è.\x20–ó–∞–≤–µ—Ä—à–∏—Ç–µ\x20–µ—ë\x20–ø—Ä–µ–∂–¥–µ,\x20—á–µ–º\x20–Ω–∞—á–∏–Ω–∞—Ç—å\x20–Ω–æ–≤—É—é.','.nav-tabs','classList','querySelectorAll','getCapabilities','keydown','Auth\x20failed','captureButton','tma\x20','opacity','üì§\x20–û—Ç–ø—Ä–∞–≤–∫–∞\x20–¥–∞–Ω–Ω—ã—Ö...','&action=','console','‚ùå\x20–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,\x20—É–∫–∞–∂–∏—Ç–µ\x20–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π\x20–ø—Ä–æ–±–µ–≥.','locationButton','Photo\x20','getUserMedia','zoomSlider','forEach','appendChild','error','target','‚úÖ\x20–û–ö','test','videoHeight','.nav-button','--tg-theme-hint-color','img','__proto__','src','307914TXSAVs','display','.view','https://autopark-gthost.amvera.io/api/webapp/callback','body','getTracks','https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png','–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,\x20–≤–≤–µ–¥–∏—Ç–µ\x20–ø–æ–∫–∞–∑–∞–Ω–∏—è\x20–æ–¥–æ–º–µ—Ç—Ä–∞','then','canvas','filled','setView','addEventListener','processing','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','button_color','WebApp','bg_color','view','https://autopark-gthost.amvera.io/api/odometer','car_id','trace','Auto-play\x20error:','123380bUSXYf','Telegram','get','documentElement','toggle','warn','offsetHeight'];const _0x59aa=function(_0x18a42e,_0x344c14){_0x18a42e=_0x18a42e-0x14f;let _0x46c133=_0x24c9[_0x18a42e];return _0x46c133;};const _0x55fd93=_0x59aa;(function(_0x26fb8e,_0x549d4e){const _0x4d76bd=_0x59aa;while(!![]){try{const _0x5d68db=parseInt(_0x4d76bd(0x205))*parseInt(_0x4d76bd(0x1c3))+-parseInt(_0x4d76bd(0x19d))+parseInt(_0x4d76bd(0x1e9))+parseInt(_0x4d76bd(0x157))+parseInt(_0x4d76bd(0x1b4))+-parseInt(_0x4d76bd(0x1ca))+-parseInt(_0x4d76bd(0x1f8))*-parseInt(_0x4d76bd(0x1ce));if(_0x5d68db===_0x549d4e)break;else _0x26fb8e['push'](_0x26fb8e['shift']());}catch(_0x56573d){_0x26fb8e['push'](_0x26fb8e['shift']());}}}(_0x24c9,0x3aea0));const _0x1c2d81=function(){let _0xdd0ca2=!![];return function(_0x1af46b,_0x5bd84f){const _0x742a90=_0xdd0ca2?function(){if(_0x5bd84f){const _0x2659df=_0x5bd84f['apply'](_0x1af46b,arguments);return _0x5bd84f=null,_0x2659df;}}:function(){};return _0xdd0ca2=![],_0x742a90;};}(),_0x485823=_0x1c2d81(this,function(){const _0x594d11=function(){const _0x173da9=_0x59aa,_0x3aac97=_0x594d11[_0x173da9(0x172)](_0x173da9(0x1c0))()[_0x173da9(0x172)](_0x173da9(0x1ab));return!_0x3aac97[_0x173da9(0x196)](_0x485823);};return _0x594d11();});_0x485823();const _0x1c3007=function(){let _0x3a992c=!![];return function(_0x3a40b1,_0x4e82af){const _0x5e2a96=_0x3a992c?function(){if(_0x4e82af){const _0x31f0a4=_0x4e82af['apply'](_0x3a40b1,arguments);return _0x4e82af=null,_0x31f0a4;}}:function(){};return _0x3a992c=![],_0x5e2a96;};}(),_0x20719b=_0x1c3007(this,function(){const _0x4314f6=_0x59aa;let _0x1e7bd5;try{const _0x21be1c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1e7bd5=_0x21be1c();}catch(_0x4c1e8a){_0x1e7bd5=window;}const _0x283f4f=_0x1e7bd5[_0x4314f6(0x18b)]=_0x1e7bd5[_0x4314f6(0x18b)]||{},_0x184094=['log',_0x4314f6(0x1b9),_0x4314f6(0x1c1),_0x4314f6(0x193),_0x4314f6(0x1bf),_0x4314f6(0x1c7),_0x4314f6(0x1b2)];for(let _0x23b680=0x0;_0x23b680<_0x184094['length'];_0x23b680++){const _0x126c7a=_0x1c3007[_0x4314f6(0x172)][_0x4314f6(0x170)][_0x4314f6(0x17b)](_0x1c3007),_0x48ed65=_0x184094[_0x23b680],_0x26c56b=_0x283f4f[_0x48ed65]||_0x126c7a;_0x126c7a[_0x4314f6(0x19b)]=_0x1c3007[_0x4314f6(0x17b)](_0x1c3007),_0x126c7a['toString']=_0x26c56b['toString'][_0x4314f6(0x17b)](_0x26c56b),_0x283f4f[_0x48ed65]=_0x126c7a;}});_0x20719b();const webapp=window['Telegram']['WebApp'];webapp[_0x55fd93(0x175)](),webapp[_0x55fd93(0x15a)]();const initData=webapp[_0x55fd93(0x152)],params=webapp['themeParams'],root=document[_0x55fd93(0x1b7)];params&&(root[_0x55fd93(0x206)][_0x55fd93(0x1c5)]('--tg-theme-bg-color',params[_0x55fd93(0x1ae)]),root['style']['setProperty']('--tg-theme-text-color',params[_0x55fd93(0x1e7)]),root['style'][_0x55fd93(0x1c5)](_0x55fd93(0x199),params[_0x55fd93(0x1ec)]),root['style'][_0x55fd93(0x1c5)](_0x55fd93(0x1fb),params[_0x55fd93(0x1dd)]),root['style'][_0x55fd93(0x1c5)](_0x55fd93(0x15f),params[_0x55fd93(0x1ac)]),root['style'][_0x55fd93(0x1c5)](_0x55fd93(0x174),params[_0x55fd93(0x16a)]));const navButtons=document[_0x55fd93(0x182)](_0x55fd93(0x198)),views=document[_0x55fd93(0x182)](_0x55fd93(0x19f)),locationButton=document[_0x55fd93(0x1c8)](_0x55fd93(0x18d)),continueButton=document[_0x55fd93(0x1c8)]('continueButton'),errorMessage=document[_0x55fd93(0x1c8)](_0x55fd93(0x178)),video=document[_0x55fd93(0x1c8)](_0x55fd93(0x16f)),canvas=document[_0x55fd93(0x1c8)](_0x55fd93(0x1a6)),captureButton=document['getElementById'](_0x55fd93(0x186)),backButton=document[_0x55fd93(0x1c8)](_0x55fd93(0x15b)),odometerInput=document[_0x55fd93(0x1c8)](_0x55fd93(0x1e5)),odometer=document[_0x55fd93(0x1c8)]('odometer'),continueToPhotos=document[_0x55fd93(0x1c8)]('continueToPhotos'),sessionVideo=document['getElementById']('sessionVideo'),sessionCanvas=document[_0x55fd93(0x1c8)](_0x55fd93(0x1dc)),sessionCaptureButton=document[_0x55fd93(0x1c8)](_0x55fd93(0x14f)),photoCounter=document[_0x55fd93(0x1c8)]('photoCounter'),photoGrid=document['getElementById'](_0x55fd93(0x1cf)),urlParams=new URLSearchParams(window[_0x55fd93(0x1bb)][_0x55fd93(0x153)]),chatId=urlParams[_0x55fd93(0x1b6)](_0x55fd93(0x1d5)),msgId=urlParams[_0x55fd93(0x1b6)](_0x55fd93(0x1eb)),carId=urlParams[_0x55fd93(0x1b6)](_0x55fd93(0x1b1)),cameraTopControls=document[_0x55fd93(0x1c8)](_0x55fd93(0x1d3)),action=urlParams['get'](_0x55fd93(0x1cd))||'start';let currentMarker=null,stream=null,photoTaken=![],sessionPhotos=[];const REQUIRED_PHOTOS=0x4,map=L[_0x55fd93(0x16b)]('map')[_0x55fd93(0x1a8)]([51.505,-0.09],0xd);L['tileLayer'](_0x55fd93(0x1a3),{'attribution':'¬©\x20OpenStreetMap\x20contributors'})[_0x55fd93(0x179)](map),odometer[_0x55fd93(0x1a9)](_0x55fd93(0x184),_0x427549=>{const _0x328da0=_0x55fd93;if(_0x427549[_0x328da0(0x1e1)]==='Enter'){_0x427549[_0x328da0(0x1e8)]();if(!odometer['value']){showError(_0x328da0(0x1a4));return;}window[_0x328da0(0x1b5)]?.[_0x328da0(0x1ad)]?.['HapticFeedback']&&Telegram[_0x328da0(0x1ad)][_0x328da0(0x1d7)]['impactOccurred']('light'),switchView(_0x328da0(0x1e0));}});function showError(_0x5bfdb0){const _0x29b88e=_0x55fd93;errorMessage[_0x29b88e(0x17c)]=_0x5bfdb0,errorMessage[_0x29b88e(0x206)]['display']='block';}function switchView(_0xda831d){const _0x225e13=_0x55fd93;hideSpinner(),navButtons['forEach'](_0x2f6265=>{const _0x52fd23=_0x59aa;_0x2f6265[_0x52fd23(0x181)]['toggle'](_0x52fd23(0x1f1),_0x2f6265[_0x52fd23(0x1ed)][_0x52fd23(0x1af)]===_0xda831d);}),views[_0x225e13(0x191)](_0x131c1a=>{const _0xc4b2c6=_0x225e13;_0x131c1a['classList'][_0xc4b2c6(0x1b8)](_0xc4b2c6(0x1f1),_0x131c1a['id']===_0xda831d+_0xc4b2c6(0x1d8));}),document[_0x225e13(0x17e)](_0x225e13(0x180))[_0x225e13(0x181)]['remove'](_0x225e13(0x1e4)),_0xda831d===_0x225e13(0x1d9)||_0xda831d===_0x225e13(0x1e0)?startCamera(_0xda831d):stopCamera(),_0xda831d==='session'&&updateSessionUI();}!initData?showForbiddenError():(initApp(),switchView(_0x55fd93(0x16b)));function createDraggableMarker(_0x8dae3f){const _0x49f84f=_0x55fd93;currentMarker&&map[_0x49f84f(0x16c)](currentMarker),currentMarker=L[_0x49f84f(0x16e)](_0x8dae3f,{'draggable':!![]})[_0x49f84f(0x179)](map),continueButton['classList'][_0x49f84f(0x15e)]('hidden');}const isAndroid=/Android/i[_0x55fd93(0x196)](navigator[_0x55fd93(0x154)]);let hasTappedToStart=![],currentZoom=0x1,torchOn=![];const zoomSlider=document['getElementById'](_0x55fd93(0x190)),torchButton=document['getElementById']('torchButton');function setCameraZoom(_0x4f14b9){const _0x4421f0=_0x55fd93;if(stream&&stream[_0x4421f0(0x1fc)]){const [_0x4c287f]=stream['getVideoTracks']();if(_0x4c287f&&_0x4c287f[_0x4421f0(0x183)]&&_0x4c287f[_0x4421f0(0x1ef)]){const _0x5bc53b=_0x4c287f['getCapabilities']();_0x5bc53b[_0x4421f0(0x1fd)]&&_0x4c287f['applyConstraints']({'advanced':[{'zoom':_0x4f14b9}]});}}}function setTorch(_0x36b2fb){const _0x2fcde3=_0x55fd93;if(stream&&stream[_0x2fcde3(0x1fc)]){const [_0x4e4b44]=stream[_0x2fcde3(0x1fc)]();_0x4e4b44&&_0x4e4b44[_0x2fcde3(0x183)]&&_0x4e4b44[_0x2fcde3(0x183)]()[_0x2fcde3(0x159)]&&(_0x4e4b44[_0x2fcde3(0x1ef)]({'advanced':[{'torch':_0x36b2fb}]}),torchButton[_0x2fcde3(0x181)][_0x2fcde3(0x1b8)]('on',_0x36b2fb));}}zoomSlider&&zoomSlider['addEventListener'](_0x55fd93(0x1d0),_0x5bad1b=>{const _0x579cbd=_0x55fd93;currentZoom=parseFloat(_0x5bad1b[_0x579cbd(0x194)][_0x579cbd(0x158)]),setCameraZoom(currentZoom);});torchButton&&torchButton[_0x55fd93(0x1a9)](_0x55fd93(0x167),()=>{torchOn=!torchOn,setTorch(torchOn);});async function startCamera(_0xf2d872){const _0x4f5a50=_0x55fd93,_0x5d49fc=_0xf2d872===_0x4f5a50(0x1e0)?sessionVideo:video,_0x5e3f05=_0xf2d872===_0x4f5a50(0x1e0)?sessionCaptureButton:captureButton,_0x54a837=_0xf2d872==='session'?sessionCanvas:canvas;try{stream=await navigator['mediaDevices'][_0x4f5a50(0x18f)]({'video':{'facingMode':'environment'}}),_0x5d49fc[_0x4f5a50(0x1f7)]=stream;if(_0xf2d872===_0x4f5a50(0x1e0)&&isAndroid&&!hasTappedToStart){const _0x4cf4a0=document[_0x4f5a50(0x1c8)](_0x4f5a50(0x1bc));_0x4cf4a0[_0x4f5a50(0x181)][_0x4f5a50(0x15e)](_0x4f5a50(0x1e4)),_0x4cf4a0['addEventListener']('click',async()=>{const _0x2352d9=_0x4f5a50;_0x4cf4a0[_0x2352d9(0x181)][_0x2352d9(0x165)](_0x2352d9(0x1e4)),hasTappedToStart=!![];try{await _0x5d49fc['play'](),enableCaptureButton(_0xf2d872);}catch(_0x16984d){console[_0x2352d9(0x1b9)]('User-triggered\x20play\x20failed:',_0x16984d),showError('–û—à–∏–±–∫–∞\x20–∑–∞–ø—É—Å–∫–∞\x20–∫–∞–º–µ—Ä—ã.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–µ—â—ë\x20—Ä–∞–∑.');}},{'once':!![]});return;}else await _0x5d49fc[_0x4f5a50(0x1db)]()[_0x4f5a50(0x208)](_0x292924=>{const _0x315f18=_0x4f5a50;console[_0x315f18(0x1b9)](_0x315f18(0x1b3),_0x292924);});enableCaptureButton(_0xf2d872),_0x5d49fc[_0x4f5a50(0x206)][_0x4f5a50(0x19e)]=_0x4f5a50(0x156),_0x54a837[_0x4f5a50(0x206)][_0x4f5a50(0x19e)]=_0x4f5a50(0x176),_0xf2d872===_0x4f5a50(0x1d9)&&cameraTopControls&&cameraTopControls['classList'][_0x4f5a50(0x15e)](_0x4f5a50(0x1e4)),_0xf2d872===_0x4f5a50(0x1d9)&&(zoomSlider&&(zoomSlider[_0x4f5a50(0x158)]=_0x4f5a50(0x1f2),currentZoom=0x1,setCameraZoom(currentZoom)),torchButton&&(torchOn=![],setTorch(![])));}catch(_0x32aa6e){console[_0x4f5a50(0x193)](_0x4f5a50(0x1d1),_0x32aa6e),showError(_0x4f5a50(0x160)),_0x5e3f05[_0x4f5a50(0x1cb)]=!![];}}function enableCaptureButton(_0x4b51ef){const _0x5d6c16=_0x55fd93,_0x1a168c=_0x4b51ef===_0x5d6c16(0x1e0)?sessionCaptureButton:captureButton;_0x1a168c[_0x5d6c16(0x1cb)]=![],_0x1a168c[_0x5d6c16(0x181)][_0x5d6c16(0x15e)](_0x5d6c16(0x1e4)),_0x1a168c[_0x5d6c16(0x206)][_0x5d6c16(0x188)]='1',_0x1a168c[_0x5d6c16(0x206)][_0x5d6c16(0x19e)]='block';}function stopCamera(){const _0x51d648=_0x55fd93;stream&&(stream[_0x51d648(0x1a2)]()[_0x51d648(0x191)](_0x8aebaa=>_0x8aebaa[_0x51d648(0x1f0)]()),stream=null),[video,sessionVideo][_0x51d648(0x191)](_0x2dfde5=>_0x2dfde5[_0x51d648(0x1f7)]=null),[captureButton,sessionCaptureButton]['forEach'](_0x424e67=>_0x424e67[_0x51d648(0x1cb)]=!![]);}function resetCameraView(){const _0x5e7fb9=_0x55fd93;photoTaken=![],video[_0x5e7fb9(0x206)][_0x5e7fb9(0x19e)]=_0x5e7fb9(0x156),canvas[_0x5e7fb9(0x206)][_0x5e7fb9(0x19e)]=_0x5e7fb9(0x176),captureButton[_0x5e7fb9(0x206)][_0x5e7fb9(0x19e)]='block',odometerInput[_0x5e7fb9(0x181)]['add']('hidden'),backButton[_0x5e7fb9(0x181)]['add'](_0x5e7fb9(0x1e4)),odometer[_0x5e7fb9(0x158)]='';}function capturePhoto(_0x2d27ca,_0x45bd1e){const _0x291d77=_0x55fd93,_0x523fd7=_0x45bd1e['getContext']('2d'),_0x48a789=_0x2d27ca[_0x291d77(0x1e3)],_0x10555=_0x2d27ca[_0x291d77(0x197)];return _0x45bd1e['width']=_0x48a789,_0x45bd1e['height']=_0x10555,_0x523fd7[_0x291d77(0x1cc)](_0x2d27ca,0x0,0x0,_0x48a789,_0x10555),_0x45bd1e['toDataURL'](_0x291d77(0x1f6));}function captureAndCropPhoto(_0x4e480a,_0x38b60d){const _0x5a4121=_0x55fd93,_0x1d2c3b=_0x38b60d[_0x5a4121(0x1c6)]('2d'),_0x476cc4=_0x4e480a[_0x5a4121(0x1e3)],_0x5ef64a=_0x4e480a[_0x5a4121(0x197)],_0x269df8=_0x476cc4,_0x440a61=_0x5ef64a,_0x21c0c4=(_0x476cc4-_0x269df8)/0x2,_0x5dac06=(_0x5ef64a-_0x440a61)/0x2;return _0x38b60d['width']=_0x269df8,_0x38b60d['height']=_0x440a61,_0x1d2c3b[_0x5a4121(0x1cc)](_0x4e480a,_0x21c0c4,_0x5dac06,_0x269df8,_0x440a61,0x0,0x0,_0x269df8,_0x440a61),_0x38b60d['toDataURL'](_0x5a4121(0x1f6));}function updateSessionUI(){const _0x37f23e=_0x55fd93;photoCounter[_0x37f23e(0x169)]='';for(let _0x44fbec=0x0;_0x44fbec<REQUIRED_PHOTOS;_0x44fbec++){const _0x47227b=document[_0x37f23e(0x1be)](_0x37f23e(0x200));_0x47227b[_0x37f23e(0x1de)]=_0x37f23e(0x161)+(sessionPhotos[_0x44fbec]?_0x37f23e(0x1a7):_0x37f23e(0x171));if(sessionPhotos[_0x44fbec]){const _0x55671e=document['createElement'](_0x37f23e(0x19a));_0x55671e[_0x37f23e(0x19c)]=sessionPhotos[_0x44fbec],_0x55671e[_0x37f23e(0x15c)]=_0x37f23e(0x18e)+(_0x44fbec+0x1),_0x47227b[_0x37f23e(0x192)](_0x55671e);}else _0x47227b[_0x37f23e(0x17c)]=_0x44fbec+0x1;photoCounter[_0x37f23e(0x192)](_0x47227b);}}function showNotification(_0x4e7556){const _0x317f04=_0x55fd93,_0x36fe08=document[_0x317f04(0x1be)](_0x317f04(0x200));_0x36fe08[_0x317f04(0x1de)]='notification',_0x36fe08[_0x317f04(0x17c)]=_0x4e7556,document[_0x317f04(0x1a1)][_0x317f04(0x192)](_0x36fe08),_0x36fe08[_0x317f04(0x1ba)],_0x36fe08['classList'][_0x317f04(0x165)](_0x317f04(0x1df)),setTimeout(()=>{const _0x284f15=_0x317f04;_0x36fe08[_0x284f15(0x181)][_0x284f15(0x15e)](_0x284f15(0x1df)),setTimeout(()=>_0x36fe08['remove'](),0x12c);},0x7d0);}function showSpinner(){const _0x2934b3=_0x55fd93,_0x27fb6d=document[_0x2934b3(0x1c8)](_0x2934b3(0x16d));_0x27fb6d['classList'][_0x2934b3(0x15e)](_0x2934b3(0x1e4),_0x2934b3(0x1ff)),_0x27fb6d[_0x2934b3(0x17e)](_0x2934b3(0x1c9))[_0x2934b3(0x206)][_0x2934b3(0x19e)]=_0x2934b3(0x156);}function hideSpinner(){const _0xaaab60=_0x55fd93;document[_0xaaab60(0x1c8)](_0xaaab60(0x16d))[_0xaaab60(0x181)]['add']('hidden');}function showCheckmark(){const _0x7e45e9=_0x55fd93,_0x43de6=document['getElementById'](_0x7e45e9(0x16d));_0x43de6[_0x7e45e9(0x181)]['add'](_0x7e45e9(0x1ff)),_0x43de6[_0x7e45e9(0x17e)](_0x7e45e9(0x1c9))[_0x7e45e9(0x206)][_0x7e45e9(0x19e)]=_0x7e45e9(0x176);}function hideReviewButtons(){const _0x208edc=_0x55fd93;document['getElementById']('reviewButtons')[_0x208edc(0x181)][_0x208edc(0x165)](_0x208edc(0x1e4));}const backToCameraBtn=document['getElementById'](_0x55fd93(0x1f5));backToCameraBtn&&backToCameraBtn[_0x55fd93(0x1a9)](_0x55fd93(0x167),()=>{const _0x4b8f37=_0x55fd93;hideSpinner(),hideReviewButtons(),startCamera(_0x4b8f37(0x1d9)),document[_0x4b8f37(0x17e)](_0x4b8f37(0x180))['classList'][_0x4b8f37(0x15e)]('hidden'),captureButton['classList']['remove'](_0x4b8f37(0x1e4)),captureButton[_0x4b8f37(0x1cb)]=![],captureButton['style']['display']=_0x4b8f37(0x156);if(cameraTopControls)cameraTopControls['classList'][_0x4b8f37(0x15e)](_0x4b8f37(0x1e4));});let reviewHandlerAttached=![];function showReviewButtons(){const _0x4ce83e=_0x55fd93,_0x358d23=document[_0x4ce83e(0x1c8)](_0x4ce83e(0x163));!reviewHandlerAttached&&(_0x358d23[_0x4ce83e(0x1a9)](_0x4ce83e(0x167),handleSubmitPhoto),reviewHandlerAttached=!![]),document[_0x4ce83e(0x1c8)](_0x4ce83e(0x202))[_0x4ce83e(0x181)][_0x4ce83e(0x15e)](_0x4ce83e(0x1e4));}let recognizedOdometer=null,lastOdometerPhoto=null,lastRecognizedOdometerPhoto=null;async function uploadOdometerPhoto(_0x344f21,_0xab6238,_0x3918d7,_0xd44cb2,_0x1a0ee0){const _0x3bf2fd=_0x55fd93;try{const _0x27dc79=await fetch(_0x3bf2fd(0x1b0),{'method':_0x3bf2fd(0x177),'headers':{'Content-Type':_0x3bf2fd(0x173),'Authorization':_0x3bf2fd(0x187)+_0x1a0ee0},'body':JSON[_0x3bf2fd(0x204)]({'photo':_0x344f21,'recognized_photo':_0xab6238||null,'car_id':_0x3918d7,'odometer_value':_0xd44cb2||null})}),_0x3c5c63=await _0x27dc79[_0x3bf2fd(0x15d)]();if(!_0x27dc79['ok'])throw new Error(_0x3c5c63[_0x3bf2fd(0x203)]||'Failed\x20to\x20upload\x20odometer\x20photo');return console[_0x3bf2fd(0x150)](_0x3bf2fd(0x166),_0x3c5c63),_0x3c5c63;}catch(_0x20aaa1){return console[_0x3bf2fd(0x193)](_0x3bf2fd(0x1ee),_0x20aaa1),null;}}async function handleSubmitPhoto(){const _0x1a9fe6=_0x55fd93;showSpinner();try{if(canvas[_0x1a9fe6(0x1da)]===0x0||canvas[_0x1a9fe6(0x1f3)]===0x0){hideSpinner();return;}const _0x35e170=canvas['toDataURL'](_0x1a9fe6(0x1f6));lastOdometerPhoto=_0x35e170;const _0x3e4ca2=await fetch(_0x1a9fe6(0x17d),{'method':'POST','headers':{'Content-Type':'application/json','Authorization':_0x1a9fe6(0x187)+initData},'body':JSON['stringify']({'photo':_0x35e170,'car_id':Number(carId),'action':action})}),_0x2ce5be=await _0x3e4ca2[_0x1a9fe6(0x15d)]();if(_0x3e4ca2['ok']){if(_0x2ce5be[_0x1a9fe6(0x162)]==='ok')recognizedOdometer=_0x2ce5be[_0x1a9fe6(0x155)],showCheckmark(),setTimeout(()=>{const _0x1af596=_0x1a9fe6;switchView(_0x1af596(0x1e0));},0x3e8);else _0x2ce5be[_0x1a9fe6(0x162)]===_0x1a9fe6(0x1aa)&&(alert('–ù–µ\x20—É–¥–∞–ª–æ—Å—å\x20—Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å\x20–∑–Ω–∞—á–µ–Ω–∏–µ'),switchView(_0x1a9fe6(0x1d9)),document[_0x1a9fe6(0x1c8)]('reviewButtons')[_0x1a9fe6(0x181)][_0x1a9fe6(0x165)](_0x1a9fe6(0x1e4)));}else console[_0x1a9fe6(0x193)](_0x1a9fe6(0x201),_0x2ce5be);}catch(_0x1c9390){console[_0x1a9fe6(0x193)](_0x1a9fe6(0x1e2),_0x1c9390);}finally{hideSpinner();}}async function notifyServer(_0x462c2b){const _0x4a3e9=_0x55fd93,_0x4f5ca4={'chat_id':chatId,'message_id':msgId,'event':_0x462c2b,'init_data':initData};try{const _0x257361=await fetch(_0x4a3e9(0x1a0),{'method':'POST','headers':{'Content-Type':_0x4a3e9(0x173)},'body':JSON[_0x4a3e9(0x204)](_0x4f5ca4)}),_0x55be89=await _0x257361[_0x4a3e9(0x15d)]();console['log'](_0x4a3e9(0x1fe),_0x55be89);}catch(_0x50b58d){console['error']('Callback\x20error:',_0x50b58d),showError(_0x50b58d);return;}setTimeout(()=>webapp['close'](),0x64);}async function sendSessionData(){const _0x43a043=_0x55fd93;if(!initData){showError(_0x43a043(0x168));return;}const _0x2084b3=currentMarker?.['getLatLng']?.();if(!_0x2084b3){showError('‚ùå\x20–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã\x20–Ω–µ\x20–≤—ã–±—Ä–∞–Ω—ã.');return;}const _0x4b17e3=Number(odometer['value']);if(isNaN(_0x4b17e3)||_0x4b17e3<0x0){showError(_0x43a043(0x18c));return;}if(sessionPhotos['length']!==REQUIRED_PHOTOS){showError('‚ùå\x20–ù–µ–æ–±—Ö–æ–¥–∏–º–æ\x204\x20—Ñ–æ—Ç–æ.');return;}if(!lastOdometerPhoto){showError(_0x43a043(0x1fa));return;}const _0x239b62=recognizedOdometer!==null&&recognizedOdometer!==undefined?recognizedOdometer:_0x4b17e3,_0x1b5294={'car_id':Number(carId),'action':action,'latitude':_0x2084b3[_0x43a043(0x1bd)],'longitude':_0x2084b3['lng'],'odometer':_0x239b62,'photos':sessionPhotos,'odometer_photo':lastOdometerPhoto,'init_data':initData};try{const _0x1b234c=await fetch(_0x43a043(0x1d2),{'method':_0x43a043(0x177),'headers':{'Content-Type':_0x43a043(0x173),'Authorization':_0x43a043(0x187)+initData},'body':JSON[_0x43a043(0x204)](_0x1b5294)}),_0x27a2bb=await _0x1b234c['json']();if(_0x1b234c['ok']&&_0x27a2bb['status']==='ok')await notifyServer({'event':action,'car_id':Number(carId)}),showNotification(_0x27a2bb['message']||_0x43a043(0x195));else{const _0x2c8eb7=_0x27a2bb['detail']||_0x43a043(0x1e6);showError(_0x2c8eb7);}}catch(_0x751fdc){console[_0x43a043(0x193)](_0x751fdc),showError(_0x43a043(0x1c2));}}function showForbiddenError(){const _0x56a04d=_0x55fd93;document['querySelector'](_0x56a04d(0x151))[_0x56a04d(0x181)][_0x56a04d(0x165)]('hidden'),document[_0x56a04d(0x1c8)]('forbiddenPage')[_0x56a04d(0x181)]['remove']('hidden');}navButtons[_0x55fd93(0x191)](_0x1af253=>{const _0x5ed938=_0x55fd93;_0x1af253['addEventListener'](_0x5ed938(0x167),()=>{const _0x30518=_0x5ed938,_0x475cb7=_0x1af253[_0x30518(0x1ed)]['view'];switchView(_0x475cb7);});}),map['on'](_0x55fd93(0x167),_0x3b288b=>createDraggableMarker(_0x3b288b['latlng'])),locationButton[_0x55fd93(0x1a9)](_0x55fd93(0x167),()=>{const _0x2d1a8a=_0x55fd93;if(!navigator[_0x2d1a8a(0x1d4)]){alert(_0x2d1a8a(0x1f9));return;}navigator[_0x2d1a8a(0x1d4)][_0x2d1a8a(0x17a)](({coords:_0x59d682})=>{const _0x6672b6=_0x2d1a8a;createDraggableMarker([_0x59d682[_0x6672b6(0x164)],_0x59d682[_0x6672b6(0x1ea)]]),map[_0x6672b6(0x1a8)]([_0x59d682[_0x6672b6(0x164)],_0x59d682[_0x6672b6(0x1ea)]],0xf);},()=>alert(_0x2d1a8a(0x1f9)));}),captureButton['addEventListener'](_0x55fd93(0x167),()=>{const _0x5f2285=_0x55fd93,_0x38c6b9=captureAndCropPhoto(video,canvas);stopCamera(),canvas[_0x5f2285(0x206)][_0x5f2285(0x19e)]=_0x5f2285(0x156),video[_0x5f2285(0x206)]['display']=_0x5f2285(0x176),captureButton[_0x5f2285(0x206)][_0x5f2285(0x19e)]=_0x5f2285(0x176);if(cameraTopControls)cameraTopControls[_0x5f2285(0x181)][_0x5f2285(0x165)](_0x5f2285(0x1e4));document['querySelector'](_0x5f2285(0x180))[_0x5f2285(0x181)]['add'](_0x5f2285(0x1e4)),showReviewButtons();}),sessionCaptureButton[_0x55fd93(0x1a9)](_0x55fd93(0x167),()=>{const _0x42edb7=_0x55fd93,_0x293f39=capturePhoto(sessionVideo,sessionCanvas);sessionPhotos[_0x42edb7(0x1f4)]<REQUIRED_PHOTOS&&sessionPhotos['push'](_0x293f39),updateSessionUI(),sessionPhotos[_0x42edb7(0x1f4)]===REQUIRED_PHOTOS?(showNotification(_0x42edb7(0x189)),setTimeout(()=>sendSessionData(),0x3e8)):setTimeout(()=>startCamera('session'),0x1f4);}),continueButton[_0x55fd93(0x1a9)](_0x55fd93(0x167),()=>switchView('camera')),backButton[_0x55fd93(0x1a9)](_0x55fd93(0x167),()=>startCamera(_0x55fd93(0x1d9))),odometer[_0x55fd93(0x1a9)](_0x55fd93(0x1d0),()=>{const _0x47c72a=_0x55fd93;continueToPhotos[_0x47c72a(0x1cb)]=!odometer[_0x47c72a(0x158)];}),continueToPhotos[_0x55fd93(0x1a9)](_0x55fd93(0x167),()=>{const _0x39a09b=_0x55fd93;if(odometer[_0x39a09b(0x158)])switchView('session');});function initApp(){const _0x302612=_0x55fd93;fetch(_0x302612(0x1d6)+carId+_0x302612(0x18a)+action,{'method':_0x302612(0x177),'headers':{'Authorization':'tma\x20'+initData}})[_0x302612(0x1a5)](_0x3c5995=>{const _0x3cf32f=_0x302612;if(_0x3c5995[_0x3cf32f(0x162)]===0x193){alert(_0x3cf32f(0x17f)),setTimeout(()=>webapp[_0x3cf32f(0x1c4)](),0x64);return;}return _0x3c5995[_0x3cf32f(0x15d)]();})[_0x302612(0x1a5)](_0x1b5862=>{const _0x1ce282=_0x302612;_0x1b5862?.[_0x1ce282(0x162)]==='ok'&&switchView('map');})['catch'](_0x105b1f=>{const _0x421e6f=_0x302612;console[_0x421e6f(0x193)](_0x421e6f(0x185),_0x105b1f),alert(_0x421e6f(0x207)),setTimeout(()=>webapp[_0x421e6f(0x1c4)](),0x7d0);});}